# 字体库使用指南

## 📋 概述

手写识别美化功能现在支持使用自定义字体库。你可以将喜欢的字体文件放入 `app/src/main/assets/fonts/` 目录，应用会自动加载并使用这些字体。

## 🎨 支持的字体类型

1. **常规字体** (`regular.ttf`) - 日常使用，清晰易读
2. **粗体字体** (`bold.ttf`) - 强调文字，醒目突出
3. **优雅字体** (`elegant.ttf`) - 细体风格，优雅美观
4. **书法字体** (`calligraphy.ttf`) - 手写风格，艺术感强

## 📥 如何添加字体文件

### 步骤 1：准备字体文件

下载或准备以下字体文件（支持 `.ttf` 或 `.otf` 格式）：

- `regular.ttf` - 常规字体
- `bold.ttf` - 粗体字体
- `elegant.ttf` - 优雅字体
- `calligraphy.ttf` - 书法字体

### 步骤 2：放置字体文件

将字体文件复制到：
```
app/src/main/assets/fonts/
├── regular.ttf
├── bold.ttf
├── elegant.ttf
└── calligraphy.ttf
```

### 步骤 3：重新编译

在 Android Studio 中：
1. 点击 **Build → Clean Project**
2. 点击 **Build → Rebuild Project**
3. 运行应用

## 🎯 推荐字体（免费商用）

### 1. 思源字体系列（Adobe，免费商用）

#### 常规字体 (regular.ttf)
- **思源黑体 Regular**
  - 下载地址：https://github.com/adobe-fonts/source-han-sans
  - 文件路径：`SourceHanSansCN-Regular.otf`
  - 重命名为：`regular.ttf`

#### 粗体字体 (bold.ttf)
- **思源黑体 Bold**
  - 下载地址：https://github.com/adobe-fonts/source-han-sans
  - 文件路径：`SourceHanSansCN-Bold.otf`
  - 重命名为：`bold.ttf`

#### 优雅字体 (elegant.ttf)
- **思源宋体 Regular**
  - 下载地址：https://github.com/adobe-fonts/source-han-serif
  - 文件路径：`SourceHanSerifCN-Regular.otf`
  - 重命名为：`elegant.ttf`

#### 书法字体 (calligraphy.ttf)
- **玄冬楷书** ⭐ 强烈推荐（免费商用）
  - 下载地址：https://github.com/Skr-ZERO/Xuandong-Kaishu
  - 授权：SIL Open Font License 1.1（允许商业使用）
  - 文件：`玄冬楷书.ttf` 或 `玄冬楷书.otf`
  - 重命名为：`calligraphy.ttf`
  - 特点：楷书风格，适合手写美化，字形优美
- **思源宋体 Bold**（替代选项）
  - 下载地址：https://github.com/adobe-fonts/source-han-serif
  - 文件路径：`SourceHanSerifCN-Bold.otf`
  - 重命名为：`calligraphy.ttf`

### 2. 其他推荐字体

#### 免费字体
- **站酷字体系列**：https://www.zcool.com.cn/special/zcoolfonts/
- **阿里巴巴普惠体**：https://fonts.alibabagroup.com/
- **OPPO Sans**：https://www.coloros.com/index/newsDetail?id=63

#### 付费字体（需要授权）
- **方正字体系列**：https://www.foundertype.com/
- **汉仪字体系列**：https://www.hanyi.com.cn/

## 🔧 字体文件要求

### 格式要求
- ✅ 支持 `.ttf` (TrueType Font)
- ✅ 支持 `.otf` (OpenType Font)
- ❌ 不支持 `.woff`、`.woff2` 等 Web 字体格式

### 字符集要求
- ✅ 必须包含常用中文字符（GB2312 或 GB18030）
- ✅ 建议包含繁体中文和英文
- ⚠️ 如果缺少某些字符，会显示为默认字体

### 文件大小
- 中文字体文件通常较大（5-20MB）
- 会增加 APK 体积
- 建议只包含必要的字体文件

## 📱 使用效果

### 在画布上显示
- 每写完一个字，识别后会在画布上显示为选中的字体样式
- 可以随时切换字体，已显示的文字会立即更新

### 字体切换
- 点击字体选择器中的按钮（常规/粗体/优雅/书法）
- 画布上的所有文字会立即更新为新字体

## ⚠️ 注意事项

1. **字体授权**：
   - 确保使用的字体有商用授权
   - 思源字体系列可免费商用
   - 部分字体需要购买授权

2. **文件命名**：
   - 必须使用精确的文件名（区分大小写）
   - `regular.ttf` 不是 `Regular.ttf`

3. **回退机制**：
   - 如果字体文件不存在，会自动使用系统默认字体
   - 不会导致应用崩溃

4. **性能影响**：
   - 字体文件会在应用启动时加载
   - 首次加载可能需要一些时间
   - 建议使用较小的字体文件

## 🐛 故障排除

### 字体没有生效
1. 检查文件是否在 `app/src/main/assets/fonts/` 目录
2. 检查文件名是否正确（区分大小写）
3. 检查文件格式是否为 `.ttf` 或 `.otf`
4. 重新编译项目（Clean → Rebuild）

### 字体显示异常
1. 检查字体文件是否损坏
2. 检查字体是否包含中文字符集
3. 查看 Logcat 是否有错误日志

### APK 体积过大
1. 只保留必要的字体文件
2. 考虑使用字体子集（只包含常用字符）
3. 使用在线字体加载（需要网络）

## 📚 相关文件

- `app/src/main/assets/fonts/README.md` - 字体目录说明
- `app/src/main/java/com/gongkao/cuotifupan/ui/ScreenHandwritingActivity.kt` - 字体加载逻辑
- `app/src/main/java/com/gongkao/cuotifupan/ui/HandwritingInputView.kt` - 文字绘制逻辑


# é¢˜ç›®è¯†åˆ«ç³»ç»Ÿæ–‡æ¡£

## ðŸ“‹ ç³»ç»Ÿæ¦‚è¿°

æœ¬ç³»ç»Ÿé‡‡ç”¨**ç‰¹å¾æå– + åŠ æƒçº¿æ€§æ‰“åˆ†**çš„æ–¹å¼ï¼Œå®žçŽ°é«˜ç²¾åº¦çš„é¢˜ç›®è¯†åˆ«ã€‚

## ðŸŽ¯ æ ¸å¿ƒç‰¹æ€§

1. **å¤šç»´åº¦ç‰¹å¾æå–**ï¼š14ä¸ªç‰¹å¾ç»´åº¦
2. **åŠ æƒçº¿æ€§æ‰“åˆ†**ï¼šå¯é…ç½®æƒé‡å’Œé˜ˆå€¼
3. **å¸ƒå±€åˆ†æž**ï¼šç©ºé—´ä½ç½®ç‰¹å¾æ£€æµ‹
4. **ç‰¹æ®Šåœºæ™¯å¤„ç†**ï¼šABCDè¢«é®æŒ¡æ—¶çš„æ›¿ä»£æ£€æµ‹
5. **ç¦»çº¿è¿è¡Œ**ï¼šå®Œå…¨æœ¬åœ°å¤„ç†ï¼Œä¿æŠ¤éšç§

## ðŸ“Š ç‰¹å¾åˆ—è¡¨

| ç‰¹å¾ | æƒé‡ | è¯´æ˜Ž |
|------|------|------|
| `numTextBlocks` | 0.05 | æ–‡æœ¬å—æ•°é‡ï¼ˆ3-10ä¸ªæœ€åˆç†ï¼‰ |
| `numLines` | 0.05 | è¡Œæ•°ï¼ˆ5-30è¡Œæœ€åˆç†ï¼‰ |
| `avgLineLength` | 0.05 | å¹³å‡è¡Œé•¿åº¦ï¼ˆ10-50å­—ç¬¦æœ€åˆç†ï¼‰ |
| `shortLineRatio` | 0.08 | çŸ­è¡Œæ¯”ä¾‹ï¼ˆ0.2-0.6æœ€åˆç†ï¼‰ |
| `optionMarkerCount` | **0.15** | é€‰é¡¹æ ‡è®°æ•°é‡ï¼ˆA/B/C/Dï¼Œæœ€é‡è¦ï¼‰ |
| `bboxVerticalAlignmentScore` | 0.12 | åž‚ç›´å¯¹é½åˆ†æ•°ï¼ˆ0-1ï¼‰ |
| `ocrConfidenceMean` | 0.05 | OCRç½®ä¿¡åº¦ |
| `emojiOrPunctRatio` | 0.05 | è¡¨æƒ…/æ ‡ç‚¹æ¯”ä¾‹ï¼ˆåº”è¾ƒä½Žï¼‰ |
| `hasQuestionKeywords` | **0.15** | æ˜¯å¦åŒ…å«é¢˜ç›®å…³é”®è¯ï¼ˆæœ€é‡è¦ï¼‰ |
| `hasMathSymbols` | 0.03 | æ˜¯å¦åŒ…å«æ•°å­¦ç¬¦å· |
| `topHalfLongLineRatio` | 0.08 | ä¸ŠåŠéƒ¨åˆ†é•¿è¡Œæ¯”ä¾‹ï¼ˆé¢˜å¹²é€šå¸¸åœ¨é¡¶éƒ¨ï¼‰ |
| `bottomHalfShortLines` | 0.10 | ä¸‹åŠéƒ¨åˆ†çŸ­è¡Œæ•°é‡ï¼ˆé€‰é¡¹é€šå¸¸åœ¨åº•éƒ¨ï¼‰ |
| `hasAlternativeMarkers` | 0.03 | æ›¿ä»£æ ‡è®°ï¼ˆÂ· - â—‹ ç­‰ï¼‰ |
| `hasSeparatorMarkers` | 0.02 | åˆ†éš”ç¬¦æ ‡è®° |

## âš™ï¸ é˜ˆå€¼é…ç½®

- **T_auto = 70**ï¼šåˆ†æ•° >= 70ï¼Œè‡ªåŠ¨åŠ å…¥é¢˜åº“
- **T_confirm = 40**ï¼šåˆ†æ•° >= 40ï¼Œå¼¹çª—ç¡®è®¤
- **T_ignore < 40**ï¼šåˆ†æ•° < 40ï¼Œå¿½ç•¥

## ðŸ”§ å‚æ•°è°ƒæ•´æŒ‡å—

### æé«˜è¯†åˆ«çŽ‡ï¼ˆé™ä½Žè¯¯æŠ¥çŽ‡ï¼‰

å¦‚æžœå‘çŽ°**è¯¯åˆ¤å¤ªå¤š**ï¼ˆéžé¢˜ç›®è¢«è¯†åˆ«ä¸ºé¢˜ç›®ï¼‰ï¼š

1. **æé«˜é˜ˆå€¼**ï¼š
   - `thresholdAuto` ä»Ž 70 æé«˜åˆ° 75-80
   - `thresholdConfirm` ä»Ž 40 æé«˜åˆ° 45-50

2. **é™ä½Žå…³é”®æƒé‡**ï¼š
   - `optionMarkerCount` ä»Ž 0.15 é™åˆ° 0.12
   - `hasQuestionKeywords` ä»Ž 0.15 é™åˆ° 0.12

3. **æé«˜æŽ’é™¤æƒé‡**ï¼š
   - `emojiOrPunctRatio` ä»Ž 0.05 æé«˜åˆ° 0.08

### æé«˜å¬å›žçŽ‡ï¼ˆå‡å°‘æ¼æŠ¥ï¼‰

å¦‚æžœå‘çŽ°**æ¼åˆ¤å¤ªå¤š**ï¼ˆé¢˜ç›®æ²¡è¢«è¯†åˆ«ï¼‰ï¼š

1. **é™ä½Žé˜ˆå€¼**ï¼š
   - `thresholdAuto` ä»Ž 70 é™åˆ° 65
   - `thresholdConfirm` ä»Ž 40 é™åˆ° 35

2. **æé«˜å…³é”®æƒé‡**ï¼š
   - `optionMarkerCount` ä»Ž 0.15 æé«˜åˆ° 0.18
   - `hasQuestionKeywords` ä»Ž 0.15 æé«˜åˆ° 0.18

3. **é™ä½ŽæŽ’é™¤æƒé‡**ï¼š
   - `emojiOrPunctRatio` ä»Ž 0.05 é™åˆ° 0.03

## ðŸŽ¨ ç‰¹æ®Šåœºæ™¯å¤„ç†

### 1. ABCDè¢«é®æŒ¡/åŽ»æŽ‰

**è§„åˆ™**ï¼šä¸‹åŠéƒ¨åˆ†å­˜åœ¨ â‰¥3 ä¸ªçŸ­è¡Œä¸” x åæ ‡æŽ¥è¿‘ä¸” `bbox_vertical_alignment_score >= 0.7`

**å¤„ç†**ï¼šè‡ªåŠ¨è¯†åˆ«ä¸ºé€‰é¡¹ç»“æž„å¹¶è¡¥åˆ†

### 2. æ›¿ä»£æ ‡è®°è¯†åˆ«

è¯†åˆ«åˆ†éš”ç¬¦ã€çŸ­è¡Œé¦–ç¬¦å·ï¼Œå¦‚ `Â· - â—‹ â— â–  â–¡ â†’` ä¹Ÿè§†ä¸ºé€‰é¡¹çº¿ç´¢

### 3. åˆ†éš”ç¬¦è¯†åˆ«

è¯†åˆ« `| ï½œ / \ â€”â€”` ç­‰åˆ†éš”ç¬¦ä½œä¸ºé€‰é¡¹åˆ†éš”çº¿ç´¢

## ðŸ“ å…¸åž‹è¯¯åˆ¤åœºæ™¯åŠè§£å†³ç­–ç•¥

### 1. æœ‹å‹åœˆå±å¹•æˆªå›¾å«å¤šæ®µçŸ­å¥è¢«è¯¯åˆ¤

**åŽŸå› **ï¼šçŸ­è¡Œå¤šï¼Œå¯èƒ½å¯¹é½

**è§£å†³**ï¼š
- æé«˜ `shortLineRatio` çš„åˆç†èŒƒå›´æ£€æŸ¥
- å¢žåŠ "æœ‹å‹åœˆ"ç­‰æŽ’é™¤å…³é”®è¯
- æ£€æŸ¥æ˜¯å¦æœ‰"ç‚¹èµž"ã€"è¯„è®º"ç­‰ç¤¾äº¤ç‰¹å¾

### 2. è¡¨æ ¼æˆªå›¾

**åŽŸå› **ï¼šå¤šè¡Œå¤šåˆ—ï¼Œå¯èƒ½å¯¹é½

**è§£å†³**ï¼š
- æ£€æµ‹æ˜¯å¦æœ‰è¡¨æ ¼ç‰¹å¾ï¼ˆå¤§é‡ `|` åˆ†éš”ç¬¦ï¼‰
- æ£€æŸ¥è¡Œé•¿åº¦æ˜¯å¦è¿‡äºŽå‡åŒ€ï¼ˆè¡¨æ ¼ç‰¹å¾ï¼‰
- é™ä½Ž `bboxVerticalAlignmentScore` æƒé‡

### 3. æ‰‹å†™é¢˜

**åŽŸå› **ï¼šOCRè¯†åˆ«è´¨é‡å·®

**è§£å†³**ï¼š
- æé«˜ `ocrConfidenceMean` æƒé‡
- é™ä½Ž `ocrConfidenceMean` é˜ˆå€¼è¦æ±‚
- å¢žåŠ æ‰‹å†™ç‰¹å¾æ£€æµ‹

### 4. æ‹ç…§è¯•å·è¾¹ç¼˜æ¨¡ç³Š

**åŽŸå› **ï¼šè¾¹ç¼˜æ–‡å­—è¯†åˆ«ä¸å‡†ç¡®

**è§£å†³**ï¼š
- å›¾åƒé¢„å¤„ç†ï¼šåŽ»å™ªã€äºŒå€¼åŒ–
- å¿½ç•¥è¾¹ç¼˜åŒºåŸŸçš„ä½Žç½®ä¿¡åº¦æ–‡å­—
- æé«˜ä¸­å¿ƒåŒºåŸŸæƒé‡

### 5. èŠå¤©è®°å½•

**åŽŸå› **ï¼šå¤šè¡ŒçŸ­å¥ï¼Œå¯èƒ½å¯¹é½

**è§£å†³**ï¼š
- æ£€æµ‹"å¾®ä¿¡"ã€"å‘é€"ç­‰å…³é”®è¯
- æ£€æŸ¥æ˜¯å¦æœ‰æ—¶é—´æˆ³æ ¼å¼
- é™ä½ŽçŸ­è¡Œæ¯”ä¾‹æƒé‡

### 6. è´­ç‰©é¡µé¢

**åŽŸå› **ï¼šä»·æ ¼ã€é€‰é¡¹æŒ‰é’®

**è§£å†³**ï¼š
- æ£€æµ‹"Â¥"ã€"è´­ä¹°"ç­‰å…³é”®è¯
- æ£€æŸ¥æ•°å­—æ¯”ä¾‹ï¼ˆä»·æ ¼ç‰¹å¾ï¼‰
- æé«˜ `emojiOrPunctRatio` æƒé‡

### 7. äºŒç»´ç /åç‰‡

**åŽŸå› **ï¼šå¯èƒ½è¯†åˆ«å‡ºä¸€äº›æ–‡å­—

**è§£å†³**ï¼š
- æ£€æµ‹"äºŒç»´ç "ã€"æ‰«ä¸€æ‰«"ç­‰å…³é”®è¯
- æ£€æŸ¥æ˜¯å¦æœ‰ç‰¹æ®Šç¬¦å·è¿‡å¤š
- æŽ’é™¤å…³é”®è¯åˆ—è¡¨

### 8. åŒ»é™¢æŠ¥å‘Š

**åŽŸå› **ï¼šå¤šè¡Œæ–‡å­—ï¼Œå¯èƒ½å¯¹é½

**è§£å†³**ï¼š
- æ£€æµ‹"è¯Šæ–­"ã€"æ£€æŸ¥"ç­‰åŒ»ç–—å…³é”®è¯
- æ£€æŸ¥æ˜¯å¦æœ‰æ—¥æœŸæ ¼å¼
- æŽ’é™¤å…³é”®è¯åˆ—è¡¨

### 9. ç«è½¦ç¥¨/æœºç¥¨

**åŽŸå› **ï¼šå¤šè¡Œä¿¡æ¯ï¼Œå¯èƒ½å¯¹é½

**è§£å†³**ï¼š
- æ£€æµ‹"è½¦ç¥¨"ã€"èˆªç­"ç­‰å…³é”®è¯
- æ£€æŸ¥æ•°å­—æ¯”ä¾‹ï¼ˆæ—¶é—´ã€ä»·æ ¼ï¼‰
- æŽ’é™¤å…³é”®è¯åˆ—è¡¨

### 10. çº¯æ–‡æœ¬æˆªå›¾ï¼ˆéžé¢˜ç›®ï¼‰

**åŽŸå› **ï¼šå¤šè¡Œæ–‡å­—ï¼Œå¯èƒ½å¯¹é½

**è§£å†³**ï¼š
- å¿…é¡»æœ‰é€‰é¡¹æ ‡è®°ï¼ˆA/B/C/Dï¼‰
- å¿…é¡»æœ‰é¢˜ç›®å…³é”®è¯æˆ–é¢˜åž‹æ ‡è®°
- æé«˜ `optionMarkerCount` æƒé‡

## ðŸš€ ä½¿ç”¨ç¤ºä¾‹

```kotlin
// åˆ›å»ºæ£€æµ‹å™¨ï¼ˆä½¿ç”¨é»˜è®¤æƒé‡ï¼‰
val detector = QuestionDetector()

// æ‰§è¡Œæ£€æµ‹
val result = detector.detect(ocrResult)

// æ ¹æ®å†³ç­–å¤„ç†
when (result.decision) {
    "auto_add" -> {
        // è‡ªåŠ¨åŠ å…¥é¢˜åº“
        addToDatabase(result)
    }
    "confirm" -> {
        // å¼¹çª—ç¡®è®¤
        showConfirmDialog(result)
    }
    "ignore" -> {
        // å¿½ç•¥
    }
}
```

## ðŸ“ˆ æ€§èƒ½æŒ‡æ ‡ç›®æ ‡

- **ç²¾ç¡®çŽ‡ï¼ˆPrecisionï¼‰**ï¼š> 85%
- **å¬å›žçŽ‡ï¼ˆRecallï¼‰**ï¼š> 80%
- **F1-Score**ï¼š> 82%
- **è¯¯æŠ¥çŽ‡ï¼ˆFalse Positive Rateï¼‰**ï¼š< 15%

## ðŸ”’ éšç§ä¿æŠ¤

- æ‰€æœ‰ OCR å’Œåˆ¤æ–­åœ¨è®¾å¤‡æœ¬åœ°å®Œæˆ
- ä¸ä¸Šä¼ ä»»ä½•å›¾ç‰‡æˆ–æ–‡å­—å†…å®¹
- ç”¨æˆ·å¯é€‰æ‹©æ˜¯å¦ä¸Šä¼ åŒ¿åç‰¹å¾ç”¨äºŽæ¨¡åž‹è®­ç»ƒ

## ðŸ“¦ éƒ¨ç½²å»ºè®®

### Android

1. **ML Kit æ¨¡åž‹**ï¼šé¦–æ¬¡ä½¿ç”¨æ—¶è‡ªåŠ¨ä¸‹è½½ï¼ˆçº¦ 10-20MBï¼‰
2. **ç¡¬ä»¶åŠ é€Ÿ**ï¼šè‡ªåŠ¨ä½¿ç”¨ GPUï¼ˆå¦‚æžœå¯ç”¨ï¼‰
3. **æ¨¡åž‹ä½ç½®**ï¼š`/data/data/com.example.myapplication/files/mlkit_models/`

### æ€§èƒ½ä¼˜åŒ–

- å›¾ç‰‡é¢„å¤„ç†ï¼šç¼©æ”¾è‡³ 800x600 ä»¥æé«˜ OCR é€Ÿåº¦
- æ‰¹é‡å¤„ç†ï¼šä½¿ç”¨åç¨‹å¹¶å‘å¤„ç†å¤šå¼ å›¾ç‰‡
- ç¼“å­˜ï¼šå·²å¤„ç†çš„å›¾ç‰‡ä¸å†é‡å¤ OCR

## ðŸ“ æ›´æ–°æ—¥å¿—

### v2.0 (å½“å‰ç‰ˆæœ¬)
- âœ… é‡æž„ä¸ºç‰¹å¾æå– + åŠ æƒæ‰“åˆ†ç³»ç»Ÿ
- âœ… æ·»åŠ å¸ƒå±€æ›¿ä»£æ£€æµ‹
- âœ… å¯é…ç½®æƒé‡å’Œé˜ˆå€¼
- âœ… è¯¦ç»†çš„æ‰“åˆ†æ˜Žç»†

### v1.0
- âœ… åŸºç¡€ OCR è¯†åˆ«
- âœ… ç®€å•è§„åˆ™åˆ¤å®š

